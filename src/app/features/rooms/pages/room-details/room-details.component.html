<div class="room-container">

  <!-- <div class="lang-switcher" style="display: flex; justify-content: flex-end; margin-bottom: 1rem;"></div>
  <button (click)="switchLanguage()" class="lang-btn" style="background: #f5f5f5; border: none; border-radius: 20px; padding: 0.5rem 1.2rem; display: flex; align-items: center; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.07); transition: background 0.2s;">
    <span class="lang-icon" style="font-size: 1.3rem; margin-right: 0.5rem;">ğŸŒ</span>
    <span class="lang-label" style="font-weight: 600; letter-spacing: 1px;">{{ currentLang === 'en' ? 'AR' : 'EN' }}</span>
  </button> -->

  <h1>{{ room.name }}</h1>

  <!-- Gallery -->
  <div class="gallery">
    <img [src]="room.photos[0]" class="main-photo" alt="Room Image" />
    <div class="thumbs">
      <img *ngFor="let photo of room.photos.slice(1, 5)" [src]="photo" class="thumb" alt="Thumbnail" />
    </div>
  </div>

  <div class="details-layout">
    <!-- Left section -->
    <div class="description">
      <h3>{{ 'Description' | translate }}</h3>
      <p>{{ 'This room can be booked individually or entirely depending on availability.' | translate }}</p>
      <!-- Add more room details here if needed -->
    </div>

    <!-- Right booking card -->
    <div class="booking-card">
      <h2>Â£{{ room.pricePerNight }} / {{ 'Month' | translate }}</h2>

      <div class="booking-dates">
       <div *ngIf="monthRanges.length > 0">
        <label>{{ 'Booking Ranges:' | translate }}</label>
        <ul>
          <li *ngFor="let r of monthRanges">
            {{ r.start }} â†’ {{ r.end }}
          </li>
        </ul>
      </div>
      </div>
      <div class="guests">
        <label>ğŸ‘¤ {{ 'Guests' | translate }}</label>
        <div class="guest-controls">
          <button (click)="decreaseGuests()" [disabled]="guests <= 1">âˆ’</button>
          <span>{{ guests }}</span>
          <button (click)="increaseGuests()">+</button>
        </div>
      </div>

      <p class="small-muted">{{ 'You can book the entire room or select individual beds below.' | translate }}</p>

      <div class="price-breakdown">
        <div class="row">
          <span>ğŸ› {{ 'Bed price' | translate }}</span>
          <span>Â£{{ selectedBedsPrice.toFixed(2) }}</span>
        </div>
        <div class="row">
          <span>{{ 'Number of beds booked' | translate }}</span>
          <span>{{ selectedBedsCount }}</span>
        </div>
        <div class="row total">
          <span>{{ 'Total cost' | translate }}</span>
          <span>Â£{{ totalCost.toFixed(2) }}</span>
        </div>
      </div>

      <div class="text-center mt-3">
          <button *ngIf="!requestSent" (click)="sendBookingRequest()" class="book-now">{{ 'Send Booking Request' | translate }}</button>

          <button *ngIf="requestSent" [routerLink]="['/chat', hostId]" class="book-now">{{ 'Chat with Host' | translate }}</button>
        </div>
    </div>
  </div>

  <br><hr /><br>
  <!-- Calendar Section -->
    <h3 style="text-align: center;">{{ 'Select check-in month' | translate }}</h3>
    <div class="calendar-year-selector">
    <button (click)="previousYear()">&#8592;</button>
    <strong>{{ currentYear }}</strong>
    <button (click)="nextYear()">&#8594;</button>
    </div>

    <div class="months-grid">
    <div *ngFor="let m of monthsShort; let i = index"
        (click)="selectMonth(i + 1)"
        class="month-tile"
        [class.selected]="isMonthSelected(i + 1)"
        [class.booked]="isMonthBooked(currentYear, i + 1)"
        [attr.aria-pressed]="isMonthSelected(i + 1)"
        role="button">
    {{ m }}
    </div>

    </div>

    <div *ngIf="selectedMonths.length" class="summary">
    <p>{{ 'You selected {{ selectedMonths.length }} month(s):' | translate:{ selectedMonths: selectedMonths.length } }}</p>
    <p>{{ moveIn }} â†’ {{ moveOut }}</p>
    </div>

    <br><hr /><br>

  <!-- Beds Section -->
  <!-- <h3 class="mt-4 mb-2">ğŸ› Beds</h3>
  <div class="bed-grid">
    <div class="bed-card" *ngFor="let bed of room.beds">
      <img *ngIf="bed.bedPhotos?.length" [src]="bed.bedPhotos[0]" alt="Bed Image" />
      <div class="info">
        <h4>{{ bed.label }}</h4>
        <p>Type: {{ bed.type }}</p>
        <p>Â£{{ bed.price }} / night</p>
        <p>Status: {{ bed.isAvailable ? 'Available' : 'Occupied' }}</p>
      </div>
    </div>
  </div> -->

  <h3 class="mt-4 mb-2">ğŸ› {{ 'Beds' | translate }}</h3>
<div class="bed-grid">
  <div class="bed-card" *ngFor="let bed of room.beds">
    <img *ngIf="bed.bedPhotos?.length" [src]="bed.bedPhotos[0]" alt="Bed Image" />
    <div class="info">
      <h4>{{ bed.label }}</h4>
      <p>{{ 'Type: ' | translate}} {{bed.type }}</p>
      <p>Â£{{ bed.price }} / {{ 'Month' | translate }}</p>
      <p>{{ 'Status:' | translate }} {{ bed.isAvailable ? ('Available' | translate) : ('Occupied' | translate) }}</p>

    <div class="bed-select" *ngIf="bed.isAvailable">
      <label>
        <input type="checkbox" [(ngModel)]="bed.selected" class="check"/>
        <span class="custom-checkbox"></span>
        {{ 'Select Bed' | translate }}
      </label>
    </div>
    <span *ngIf="!bed.isAvailable" class="bed-unavailable">{{ 'Not Available' | translate }}</span>
    </div>
  </div>
</div>

<!-- Select All Option -->
<div class="select-all">
  <button (click)="toggleSelectAllBeds()">
    {{ areAllBedsSelected() ? ('Remove All' | translate) : ('Select All' | translate) }}
  </button>
</div>


     <br><hr /><br>
    <h3>{{ 'Where youâ€™ll be' | translate }}</h3>
    <div id="map" style="height: 400px;"></div>
</div>
